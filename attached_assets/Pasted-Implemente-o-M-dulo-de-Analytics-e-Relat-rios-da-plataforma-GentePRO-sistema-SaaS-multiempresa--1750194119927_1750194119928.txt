Implemente o **MÃ³dulo de Analytics e RelatÃ³rios** da plataforma GentePRO, sistema SaaS multiempresa de recrutamento e seleÃ§Ã£o. O backend Ã© em FastAPI com PostgreSQL, autenticaÃ§Ã£o JWT, e arquitetura modular.

Este mÃ³dulo terÃ¡ como objetivo **coletar, processar e exibir indicadores em tempo real** sobre os processos seletivos, pipeline, desempenho de candidatos, origem das candidaturas e tempo mÃ©dio por etapa.

---

### ğŸ¯ OBJETIVO DO MÃ“DULO

Fornecer relatÃ³rios estratÃ©gicos e operacionais para os usuÃ¡rios com perfil `admin` e `recrutador`, com visualizaÃ§Ã£o por:

- Vaga
- Departamento
- Tempo de processo
- ConversÃ£o por etapa
- Origem dos candidatos
- PontuaÃ§Ã£o em testes
- Efetividade de entrevistas

---

### ğŸ“Š INDICADORES PRINCIPAIS (MVP)

#### ğŸ”¹ VisÃ£o Geral
- Total de vagas abertas, em triagem, encerradas
- Candidatos por status (em processo, aprovados, reprovados)
- Tempo mÃ©dio atÃ© contrataÃ§Ã£o
- Taxa de conversÃ£o por etapa (triagem > entrevista > admissÃ£o)

#### ğŸ”¹ Vaga EspecÃ­fica
- NÃºmero de candidatos inscritos
- Etapa atual dos candidatos
- Entrevistas realizadas / pendentes
- Resultados de testes

#### ğŸ”¹ Desempenho TÃ©cnico / DISC
- GrÃ¡fico de distribuiÃ§Ã£o de perfis DISC por vaga
- MÃ©dia de pontuaÃ§Ã£o tÃ©cnica por vaga
- Comparativo entre candidatos

#### ğŸ”¹ Fonte de Candidatura
- Origem das candidaturas (site, link direto, redes sociais)
- Efetividade por canal

---

### ğŸ§± ESTRUTURA TÃ‰CNICA DO BACKEND

Criar um mÃ³dulo `analytics_service.py` com funÃ§Ãµes agregadoras que consultam mÃºltiplas tabelas:

- `vagas`
- `candidatos`
- `pipeline_movimentacoes`
- `entrevistas`
- `testes_resultados`
- `comunicacoes`

---

### ğŸ”Œ ENDPOINTS A IMPLEMENTAR

- `GET /analytics/dashboard-geral`
  â†’ KPIs gerais da empresa (vagas, candidatos, conversÃ£o, tempo mÃ©dio)

- `GET /analytics/vagas/{vaga_id}`
  â†’ AnÃ¡lise completa por vaga (fluxo, conversÃ£o, testes, entrevistas)

- `GET /analytics/departamentos/{departamento_id}`
  â†’ Consolidado de vagas por departamento

- `GET /analytics/testes/{vaga_id}`
  â†’ DistribuiÃ§Ã£o DISC e mÃ©dias de teste tÃ©cnico

- `GET /analytics/origens`
  â†’ GrÃ¡fico com fontes de candidatura (requer campo `origem` no candidato)

---

### ğŸ” PERMISSÃ•ES

| Perfil       | Acesso aos relatÃ³rios                                     |
|--------------|------------------------------------------------------------|
| `admin`      | Todos os dados de todas as empresas                        |
| `recrutador` | Apenas dados da empresa que atua                           |
| `gestor`     | Apenas vagas do seu departamento                           |

---

### ğŸ§ª REGRAS E CONSIDERAÃ‡Ã•ES

- Usar `SQLAlchemy` com `funÃ§Ãµes de agregaÃ§Ã£o` (ex: `COUNT`, `AVG`, `DATEDIFF`)
- Agrupar dados por status, vaga, departamento e data
- Garantir que usuÃ¡rios sÃ³ vejam os dados permitidos (multiempresa)
- Os endpoints devem retornar objetos prontos para grÃ¡ficos (labels, values)
- Implementar cache leve para dashboards pesados (opcional)

---

### ğŸ’» SUGESTÃ•ES DE TELAS NO FRONTEND

#### ğŸ”¹ Dashboard Geral
- Cards com KPIs principais (vagas, candidatos, conversÃµes, tempo mÃ©dio)
- GrÃ¡ficos de linha ou barras por mÃªs

#### ğŸ”¹ RelatÃ³rio de Vaga
- Funil por etapa
- GrÃ¡fico de perfis DISC
- Lista de candidatos com nota tÃ©cnica

#### ğŸ”¹ RelatÃ³rio por Origem
- Pizza com distribuiÃ§Ã£o de canais
- Lista com total de inscritos por fonte

---

### âš™ï¸ CONSIDERAÃ‡Ã•ES TÃ‰CNICAS

- Criar serviÃ§o `analytics_service.py` com funÃ§Ãµes como:
```python
def total_vagas_ativas(empresa_id): ...
def tempo_medio_contratacao(empresa_id): ...
def distribuicao_perfil_disc(vaga_id): ...
def candidatos_por_etapa(vaga_id): ...
